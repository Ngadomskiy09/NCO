<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/styles.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <title>Home - NC Document Online</title>
</head>
<body>
<div class="container main">
    <div class="jumbotron">
        <h1 class="display-4">NC Document Online</h1>
        <p class="lead">Numerical Control Operators Document</p>
    </div>
</div>

<form id="info" action="#" method="post">
    <div class="container main">
        <div class="form-group">
            <label for="programmer"><strong>Programmer: </strong>
                <input id="programmer" type="text" class="form-control" name="programmer" value="{{ @programmer}}">
            </label>
            <check if="{{ @errors['programmer'] }}">
                <span class="err">{{ @errors['programmer'] }}</span>
            </check>

            <label for="rtime"><strong>Runtime: </strong>
                <input id="rtime" type="text" class="form-control" name="rtime" value="{{ @rtime}}">
            </label>
            <check if="{{ @errors['rtime'] }}">
                <span class="err">{{ @errors['rtime'] }}</span>
            </check>

            <label for="model"><strong>Model: </strong>
                <input id="model" type="text" class="form-control" name="model" value="{{ @model}}">
            </label>
            <check if="{{ @errors['model'] }}">
                <span class="err">{{ @errors['model'] }}</span>
            </check>

            <label for="fwc"><strong>FWC: </strong>
                <input id="fwc" type="text" class="form-control" name="fwc" value="{{ @fwc}}">
            </label>
            <check if="{{ @errors['fwc'] }}">
                <span class="err">{{ @errors['fwc'] }}</span>
            </check>

            <label for="media"><strong>Media File: </strong>
                <input id="media" type="text" class="form-control" name="media" value="{{ @media}}">
            </label>
            <check if="{{ @errors['media'] }}">
                <span class="err">{{ @errors['media'] }}</span>
            </check>
        </div>

        <div class="form-group border">
            <label class="col-sm-8" for="program"><strong>Program Number: </strong>
                <input id="program" type="text" class="form-control" name="program" value="{{ @program}}">
            </label>

            <label class="col-sm-2" for="make"><strong>Used to Make: </strong>
                <input id="make" type="text" class="form-control" name="make" value="{{ @make}}">
            </label>

            <label class="col-sm-3" for="date"><strong>Program Date: </strong>
                <input id="date" type="date" class="form-control" name="date" value="{{ @date}}">
            </label>

            <label class="col-sm-2" for="ptime"><strong>Program Time: </strong>
                <input id="ptime" type="time" class="form-control" name="ptime" value="{{ @ptime}}">
            </label>

            <label class="col-sm-2" for="ptype"><strong>Program Type: </strong>
                <input id="ptype" type="text" class="form-control" name="ptype" placeholder="Ex. MTO 1" value="{{ @ptype }}">
            </label>

            <label><strong>Status: </strong>
                <select name="status" class="form-control">
                    <repeat group="{{ @stat }}" value="{{ @status }}">
                                <option value="{{ @status }}"
                                        <check if="{{ @stats == @status }}">
                                               selected = "selected"
                                        </check>
                                >{{ @status }}
                        </repeat>
                </select>
            </label>
        </div>

        <h3 class="text-lg-center"><strong>Programmer's MTO Instructions</strong></h3>

        <div class="form-group text-center">

            <label><strong>Reason For Revision: </strong>
                <select name="reason" class="form-control col-sm-auto">
                    <repeat group="{{ @reasons }}" value="{{ @reason }}">
                        <option value="{{ @reason }}"
                                <check if="{{ @reason4 == @reason }}">
                                    selected = "selected"
                                </check>
                        >{{ @reason }}
                    </repeat>
                </select>
            </label>

            <label><strong>Graphic Check: </strong>
                <select name="graphic" class="form-control col-sm-auto">
                    <repeat group="{{ @graphics }}" value="{{ @graphic }}">
                        <option value="{{ @graphic }}"
                                <check if="{{ @graph == @graphic }}">
                                    selected = "selected"
                                </check>
                        >{{ @graphic }}
                    </repeat>
                </select>
            </label>

            <label><strong>MCD Compare: </strong>
                <select name="mcd" class="form-control col-sm-auto">
                    <repeat group="{{ @mcds }}" value="{{ @mcd }}">
                        <option value="{{ @mcd }}"
                                <check if="{{ @mc == @mcd }}">
                                    selected = "selected"
                                </check>
                        >{{ @mcd }}
                    </repeat>
                </select>
            </label>

            <label><strong>Previous Buy-Off: </strong>
                <select name="buyoff" class="form-control col-sm-auto">
                    <repeat group="{{ @buyoffs }}" value="{{ @buyoff }}">
                        <option value="{{ @buyoff }}"
                                <check if="{{ @bf == @buyoff }}">
                                    selected = "selected"
                                </check>
                        >{{ @buyoff }}
                    </repeat>
                </select>
            </label>

            <br>

            <label><strong>Programmer's MTO Instructions: </strong>
                <select name="instruction" class="form-control col-sm-auto">
                    <repeat group="{{ @instructions }}" value="{{ @instruction }}">
                        <option value="{{ @instruction }}"
                                <check if="{{ @instruct == @instruction }}">
                                    selected = "selected"
                                </check>
                        >{{ @instruction }}
                    </repeat>
                </select>
            </label>
        </div>

        <label class="col-sm-12" for="Pnotes" ><strong>Programmers Notes: </strong>
            <textarea id="Pnotes" name="Pnotes" rows="10" maxlength="50000" class="form-control" placeholder="..."></textarea>
        </label>

        <h3 class="text-lg-center"><strong>First Part MTO Run</strong></h3>

        <div class="form-group">
            <label class="col-sm-auto"><strong>ADD</strong>
                <button id="plus" type="button" class="form-control" name="plus" value="plus">+</button>
                <button id="minus" type="button" class="form-control" name="minus" value="minus">-</button>
            </label>

            <div id="ops">
                <div data-count="1">
                    <label class="col-sm-auto" for="operator"><strong>Operator's Name: </strong>
                        <input id="operator" type="text" class="form-control" name="operator" value="{{ @operator}}">
                    </label>

                    <label class="col-sm-auto" for="date2"><strong>Date: </strong>
                        <input id="date2" type="date" class="form-control" name="date2" value="{{ @date2}}">
                    </label>

                    <label class="col-sm-auto" for="po"><strong>P/O #: </strong>
                        <input id="po" type="text" class="form-control" name="po" value="{{ @po}}">
                    </label>

                    <label class="col-sm-auto" for="machine"><strong>Machine #: </strong>
                        <input id="machine" type="text" class="form-control" name="machine" value="{{ @machine}}">
                    </label>

                    <label><strong>Shift: </strong>
                        <select name="shift" class="form-control">
                            <repeat group="{{ @shifts }}" value="{{ @shift }}">
                                <option value="{{ @shift }}"
                                        <check if="{{ @shi == @shift }}">
                                            selected = "selected"
                                        </check>
                                >{{ @shift }}
                            </repeat>
                        </select>
                    </label>

                    <label class="col-sm-auto" for="seq"><strong>Seq. from/to: </strong>
                        <input id="seq" type="text" class="form-control" name="seq" value="{{ @seq}}">
                    </label>
                </div>
            </div>

            <hr>

            <label><strong>Milling Process acceptable? </strong>
                <select name="process" class="form-control">
                    <repeat group="{{ @processes }}" value="{{ @process }}">
                        <option value="{{ @process }}"
                                <check if="{{ @pro == @process }}">
                                    selected = "selected"
                                </check>
                        >{{ @process }}
                    </repeat>
                </select>
            </label>

            <label class="col-sm-12" for="Onotes" ><strong>Operator Notes: </strong>
                <textarea id="Onotes" name="Pnotes" rows="10" maxlength="50000" class="form-control" placeholder="..."></textarea>
            </label>

            <h3 class="text-lg-center"><strong>Layout First Part Check Report</strong></h3>

            <label><strong>Geometry acceptable? </strong>
                <select name="geometry" class="form-control">
                    <repeat group="{{ @geometrys }}" value="{{ @geometry }}">
                        <option value="{{ @geometry }}"
                                <check if="{{ @geo == @geometry }}">
                                    selected = "selected"
                                </check>
                        >{{ @geometry }}
                    </repeat>
                </select>
            </label>

            <label class="col-sm-auto" for="signature"><strong>Signature: </strong>
                <input id="signature" type="text" class="form-control" name="signature" value="{{ @signature}}">
            </label>

            <label class="col-sm-auto" for="sigdate"><strong>Date: </strong>
                <input id="sigdate" type="date" class="form-control" name="sig-date" value="{{ @sig-date}}">
            </label>

            <label class="col-sm-12" for="Lnotes" ><strong>LayOut Notes: </strong>
                <textarea id="Lnotes" name="Lnotes" rows="10" maxlength="50000" class="form-control" placeholder="..."></textarea>
            </label>
        </div>

        <h3 class="text-lg-center"><strong>Shop Approval For Production</strong></h3>

        <label class="col-sm-auto" for="sig2"><strong>Signature: </strong>
            <input id="sig2" type="text" class="form-control" name="sig2" value="{{ @sig2}}">
        </label>

        <label class="col-sm-auto" for="sig2date"><strong>Date: </strong>
            <input id="sig2date" type="date" class="form-control" name="sig2-date" value="{{ @sig2date}}">
        </label>

        <label class="col-sm-auto" for="cmes">
            <button id="cmes" type="button" class="form-control btn-secondary" name="cmes" value="cmes">CMES</button>
        </label>

        <label class="col-sm-auto" for="qAlert">
            <button id="qAlert" type="button" class="form-control btn-secondary" name="qAlert" value="qAlert">Q Alert</button>
        </label>

        <label class="col-sm-auto" for="ednc">
            <button id="ednc" type="button" class="form-control btn-secondary" name="ednc" value="ednc">eDNC</button>
        </label>

        <label class="col-sm-auto" for="mtoreport">
            <button id="mtoreport" type="button" class="form-control btn-secondary" name="mtoreport" value="mtoreport">MTO report</button>
        </label>

        <label class="col-sm-auto" for="email">
            <button id="email" type="button" class="form-control btn-secondary" name="email" value="email">email</button>
        </label>

        <br>
        <br>

        <hr>


        <h4 class="text-lg-center"><strong>Sequence Table</strong></h4>


        <div class="form-group border" >
            <button id="addsequence" type="button" class="btn btn-primary">Add Sequence</button>
            <div id="sequence-block">
            <div data-counts = "1" >
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="tool">Tool#1</label>
                            <input type="tool" class="form-control" id="tool" name="tool" value="{{ @tool}}">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="desc">Description</label>
                            <input type="desc" class="form-control" id="desc" name="desc" value="{{ @desc}}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="tool1">Tool#2</label>
                            <input type="tool1" class="form-control" id="tool1" name="tool1" value="{{ @tool1}}">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="desc1">Description</label>
                            <input type="desc1" class="form-control" id="desc1" name="desc1" value="{{ @desc1}}">
                        </div>
                    </div>
                </form>

            <textarea id="pronotes" name="pronotes" rows="5" maxlength="3000" class="form-control" placeholder="Programmers Notes..."></textarea>
            <br>
            <textarea id="opernotes" name="opernotes" rows="5" maxlength="3000" class="form-control" placeholder="Operators Notes..."></textarea>

            <div>
                <label><strong>MTO Status: </strong>
                    <select name="mtostatus" class="form-control">
                        <repeat group="{{ @mtostat }}" value="{{ @mtostatus }}">
                            <option value="{{ @mtostatus }}"
                            <check if="{{ @stats == @mtostatus }}">
                                selected = "selected"
                            </check>
                            >{{ @mtostatus }}
                        </repeat>
                    </select>
                </label>

                <input type="checkbox" id="rpmran" name="rpmran" value="rpmran">
                <label for="rpmran">F/R and RPM ran @100%</label>

                <textarea id=" " name="mtocomments" rows="3" maxlength="2000" class="form-control" placeholder="Write MTO Comments Here:"></textarea>
            </div>
            </div>
            </div>
            <button id="removesequence" type="button" class="btn btn-primary">Remove Sequence</button>
        </div>

        <br>
        <h5>Cutter List for: </h5>
        <h5>Media-File: </h5>
        <h5>FWC: </h5>
        <h5>Date Created: </h5>



        <div id="table">
            <label class="col-sm-auto" for="list"><strong>Cutter List for: </strong>
                <input id="list" type="text" class="form-control" name="list" value="{{ @list}}">
            </label>
            <label class="col-sm-auto" for="list1"><strong>Media-File: </strong>
                <input id="list1" type="text" class="form-control" name="list1" value="{{ @list1}}">
            </label>
            <label class="col-sm-auto" for="list2"><strong>FWC: </strong>
                <input id="list2" type="text" class="form-control" name="list2" value="{{ @list2}}">
            </label>
            <label class="col-sm-auto" for="list3"><strong>Date Created: </strong>
                <input id="list3" type="text" class="form-control" name="list3" value="{{ @list3}}">
            </label>
            <table class="table table-bordered table-editable" id="tbl_posts">
                <thead>
                <tr>
                    <th>#</th>
                    <th>TDM Tool Assy. ID</th>
                    <th>Tool Description</th>
                    <th>Tool Number</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody id="tbl_posts_body">
                <tr id="rec-1">
                    <td><span class="sn">1</span>.</td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td><a class="btn btn-xs delete-record" data-id="1"><i class="glyphicon glyphicon-trash"></i></a></td>
                </tr>
                <tr id="rec-2">
                    <td><span class="sn">2</span>.</td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td><a class="btn btn-xs delete-record" data-id="2"><i class="glyphicon glyphicon-trash"></i></a></td>
                </tr>

                <tr id="rec-3">
                    <td><span class="sn">3</span>.</td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td><a class="btn btn-xs delete-record" data-id="3"><i class="glyphicon glyphicon-trash"></i></a></td>
                </tr>
                </tbody>
            </table>

            <div style="display:none;">
                <table id="sample_table">
                    <tr id="">
                        <td><span class="sn"></span>.</td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td><a class="btn btn-xs delete-record" data-id="0"><i class="glyphicon glyphicon-trash"></i></a></td>
                    </tr>
                </table>
            </div>
            <div>
                <a class="btn btn-info pull-right add-record" data-added="0"><i class="glyphicon glyphicon-plus"></i> Add Row</a>
            </div>
                <br>
                <button type="submit" class="btn btn-primary btn-block btn-lg" value="next" id="next">Save</button>
            </div>
        </div>
</form>

<br>
<br>


<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>
    jQuery(document).delegate('a.add-record', 'click', function(e) {
        e.preventDefault();
        let content = jQuery('#sample_table tr'),
            size = jQuery('#tbl_posts >tbody >tr').length + 1,
            element = content.clone();
        element.attr('id', 'rec-'+size);
        element.find('.delete-record').attr('data-id', size);
        element.appendTo('#tbl_posts_body');
        element.find('.sn').html(size);
    });

    jQuery(document).delegate('a.delete-record', 'click', function(e) {
        e.preventDefault();
        var didConfirm = confirm("Are you sure You want to delete");
        if (didConfirm === true) {
            var id = jQuery(this).attr('data-id');
            var targetDiv = jQuery(this).attr('targetDiv');
            jQuery('#rec-' + id).remove();

            //regnerate index number on table
            $('#tbl_posts_body tr').each(function(index) {
                //alert(index);
                $(this).find('span.sn').html(index+1);
            });
            return true;
        } else {
            return false;
        }
    });
  
   $("#plus").on("click", function() {
        let $main = $("#ops");
        if( parseInt($main.children().last().attr("data-count")) < 5) {
            let $dupes = $main.children().last().clone();
            let count = parseInt($dupes.attr("data-count")) + 1;
            $dupes.attr("data-count", count);
            $main.last().append($dupes);
        }
    });
    $("#minus").on("click", function() {
        let $main = $("#ops");
        if( parseInt($main.children().last().attr("data-count")) !== 1){
            $main.children().last().remove();
        }
    });

    $(function () {
        let $src = $("#program");
        let $dst = $("#list");
        $src.on('input', function () {
            $dst.val($src.val());
        });
    });

    $(function () {
        let $src1 = $("#media");
        let $dst1 = $("#list1");
        $src1.on('input', function () {
            $dst1.val($src1.val());
        });
    });

    $(function () {
        let $src1 = $("#fwc");
        let $dst1 = $("#list2");
        $src1.on('input', function () {
            $dst1.val($src1.val());
        });
    });

    $(function () {
        let $src1 = $("#date");
        let $dst1 = $("#list3");
        $src1.on('input', function () {
            $dst1.val($src1.val());
        });
    });
</script>

<script>
$(document).ready(function() {
$("#sequence-block").hide();
});
</script>

<script>
    $("#addsequence").on("click", function() {
        $("#sequence-block").show();

            $("#addsequence").on("click", function() {
                let $block = $("#sequence-block");
                let $duplicate = $block.children().last().clone();
                let count = parseInt($duplicate.attr("data-counts")) + 1;
                $duplicate.attr("data-counts", count);
                $block.last().append($duplicate);
            });
         });

        $("#removesequence").on("click", function () {
            let $block = $("#sequence-block");
            if(parseInt($block.children().last().attr("data-counts")) !== 1)
             {
               $block.children().last().remove();
             }
        });
</script>

</body>
</html>